<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Projects</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <link rel="icon" href="images/tab-icon/favicon-32x32.png">
    <meta name="viewport" content="width=device-width, initial-scale=0.25">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="MRI_processing.css">
</head>
<style>
    /*#region Projects Page*/
    #geolyte-table{
        border: var(--noborder);
        border-collapse: collapse;
        padding: 20px;
        width: 1300px;
    }

    #geolyte-table th{
        border: var(--noborder);
        border-collapse: collapse;
    }
    /*#endregion Projects Page*/

  

    @media only screen and (max-width:600px){
        .helper-text{
            font-size: 60px;
        }

        .geolyte-helper{
            width: 450px;
        }
        
        .contact-segmenter{
            background-color: var(--light);
            position: relative;
            left: 0;
            right: 0;
            z-index: 0;
            padding: 15px;
            width: 1400px;
            margin-top: 600px;
        }
    }
</style>

<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="50">


<!-- #region Navbar-->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
            <a class="navbar-brand" href="#" style="color: white !important;font-weight: bold;font-size: 26px;">Stephen A Gonzalez</a>
        </div>    
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav" style="font-size:20px;">
                <li><a href="index.html">Home</a></li>
                <!--<li><a href="#experience">Experience</a></li>-->
                <li><a href="index.html#publications" data-target="#publications">Publications</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="#contact">Contact</a></li>
                <!--<li><a href="files/Stephen_Gonzalez_CV.pdf">CV</a></li>-->
            </ul>
        </div>
    </div>
</nav>
<!-- endregion Navbar-->


<!-- #region Carousel-->
<div id="myCarousel" class="carousel slide" data-ride="carousel" style="background-color:var(--light)">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
    </ol>

    <!-- Wrapper for slides-->
    <div class="carousel-inner">
        <div class="item active">
            <img src="images/carousel/MIP.png" alt="MIP image">
        </div>

        <div class="item">
            <img src="images/carousel/7T_struck3.png" alt="unprocessed brain images">
        </div>

        <div class="item">
            <img src="images/carousel/DTI_V1.png" alt="unprocessed brain images">
        </div>

        <div class="item">
            <img src="images/carousel/cortico_spinal_tract.png" alt="cortico spinal tractography">
        </div>
    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<!-- endregion Carousel-->
    

<!-- #region Intro/Description -->
<section class="center" id="intro">
    <div class="container">
        <div class="row">
            <!-- Media -->
            <div class="col-12 col-lg-5 center">
                <video height="325" width="400" style="border: 9px outset rgb(107, 110, 119);" autoplay loop muted>
                    <source src="videos/gqi.odf.whole.brain.fiber.track.rotation.movie.mp4" type="video/mp4">
                </video> 
            </div>

            <!-- Description -->
            <div class="col-12 col-lg-7 center">
                <h1>MRI Processing</h1>
                <br>

                <p>
                    The purpose of this section is to demonstrate the skills I've learned from USC's Neuroimaging and Informatics Masters Program 
                    (<a href="http://niin.usc.edu/" target="_blank" rel="noopener">NIIN</a>). Throughout this demonstration I will walk through 
                    the steps I've taken to process and visualize MRI brain scans I recieved during my study at USC. 
                    The data presented here were collected on a Siemens Prsima 3T as well as a Magnetom Terra 7T scanner.  
                    No images presented here are of anyone other than myself. 
                    With the exeption of Atlases & Templates, all images are from my own scan sessions.
                    
                </p>
                
            </div>
        </div>
    </div>

</section>
<!-- endregion Intro/Description -->


<!-- #region Structural -->
<section class="center" id="structural-section">
    <div class="container">
        <!-- Description -->
        <div class="row">
            <div class="col-12 col-lg-7 center">
                <h1>Structural Imaging</h1>
                <p>
                    This section will cover processing for two T1 weighted Magnetization Prepared Rapid Acquisition Gradient Echo images (MPRAGE).
                    One image collected from a 3T scanner and one from a 7T scanner. The 'T' stands for 'Tesla', which referes to the strength of the scanner's magnet. 
                    Scanner's with higher Tesla strengths can yeild highly detailed images with enhanced resolution, but are also susceptible to artifacting. 
                    The data presented here were processed using FMRIB's Software Library (FSL), and visuzalized using FSLeyes and 3D Slicer.  
                </p>
            </div>

            <!-- Media -->
            <div class="col-12 col-lg-5 center"> 
                <br>
                <video height="325" width="380" style="border: 9px outset rgb(107, 110, 119);" autoplay loop muted>
                    <source src="videos/7T_N4_sagittal.mp4" type="video/mp4">
                </video> 
            </div>
        </div>
        <br>
        <a data-toggle="collapse" id="view-hide-struc" data-target="#structural-content" onClick="viewHideCollapse('View', 'Hide', 'view-hide-struc')">View</a>
        <!-- Content -->
        <div class="row collapse " id="structural-content">
            <!-- Button Tool Bar-->
            <div class="btn-group btn-group-lg">
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#raw">Raw Data</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#bias-field">Bias Field Correction</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#bet">Brain Extraction</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#registration">Registration</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tissue-class">Tissue Classification</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#sub-seg">Sub-Cortical Segmentation</a>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Raw Data -->
                <br>
                <div id="raw" class="tab-pane fade in active">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_raw">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_raw">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>
                    
                    <div class="tab-content">
                        <br>
                        <!-- 3T -->
                        <div id="3T_raw" class="tab-pane fade in active">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Raw Data</h2>
                                    <P>
                                        Here we have a T1 weighted image, collected from a 3T scanner. Image weighting and contrast is beyond the scope of this demonstration, 
                                        but effectively this means that, in T1 images, areas of tissue containing fat will produce high signal and appear bright on the image, 
                                        whereas areas of tissue containing water or Cerebrospinal Fluid (CSF) produce low signal and will appear dark on the image. Image resolution 
                                        is not as good as in the 7T example, but the tissue intensity accross the image is more consistant than in the 7T. Some slight ringing artifacting 
                                        can be seein in the frontal region in the sagittal image, which is a result of head motion but is reletivley insignifitant here. The skull, and 
                                        other bits, are still present in the image, which we are not interested in and will be removed in a following step. 
                                    </P>
                                </div>
                                <div class="col-12 col-lg-3"></div>
                            </div>

                            <!-- Media -->
                            <div class="row center">
                                <h2>3T</h2>
                                <div class="col-12  center">
                                    <img height="450" width="900" style="border: 9px outset rgb(107, 110, 119);" src="images/raw/all_raw_3T_screens.png" alt="unprocessed brain images">
                                </div>
                            </div>
                        </div>

                        <!-- 7T -->
                        <div id="7T_raw" class="tab-pane fade">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Raw Data</h2>
                                    <p>
                                        Here we have a T1 weighted image, collected from a 7T scanner. Since the image weighting is the same, the same areas will appear
                                        bright (fat) or dark (water/csf). However, due to the increased magnetic field strengh, we can achieve an image with higher resolution, 
                                        which is apparent here. The drawback of this is magnetic susceptibility artifacting, which results in image intensity inconsistencies, such that 
                                        areas will be brither or darker than they should. This can be seen here in the temporal areas of the coronal image, where the white matter tissue
                                        appears darker than in other areas of the brain. While the white matter and grey matter are still distingishable to us, this artifacting can cause 
                                        issues in computer program processing tools where there might be a mis-classification of white matter as grey matter. Luckily, we can correct for
                                        these inhomogenieties which we will go over in the next step. 
                                    </p>
                                </div>
                                <div class="col-12 col-lg-3">
                                   
                                </div>
                            </div>

                            <!-- Media -->
                            <div class="row center">
                                <h2>7T</h2>
                                <div class="col-12  center">
                                    <img height="450" width="900" style="border: 9px outset rgb(107, 110, 119);" src="images/raw/all_raw_7T_screens.png" alt="unprocessed brain images">
                                </div>
                            </div>
                        </div>
                    </div> 

                </div>
                    
                
                <!-- Bias Field Correction -->
                
                <div id="bias-field" class="tab-pane fade">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_bias">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_bias">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>

                    <div class="tab-content">
                        <br>
                        <!-- 3T -->
                        <div id="3T_bias" class="tab-pane fade in active">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Bias Field Correction</h2>
                                    <p>
                                        The magnetic field of a scanner should, in theory, be homogenious, but this is not the case. It is stronger in some areas and weaker in others. 
                                        This can lead to bias in signal intensity throughout an image. Areas where the magnetic field is stronger will produce stronger signal 
                                        than there should be, and vice versa. As a result some areas will appear brighter or darker than they should. This can be seen in the
                                        example image below, particularly in areas where white matter boarders gray matter, (red arrows). This voxel intensity artifacting can cause 
                                        problems in processing tools and so we correct for it using Bias Field Correciton. Here I used <code>N4ITKBiasFieldCorrection</code> from 
                                        3D Slicer, and you can view the code down below. Before and after comparisons can be made by <b><em>clicking</em></b> on the example image below. 
                                        <b><em>Click</em></b> on the image to switch between the uncorrected and corrected images in order to see the differences. You'll notice that the signal
                                        intensity in the corrected image is much more uniform and consistant between tissue types. The differences here are subtle, but can be significant 
                                        to processing tools which is why we need to correct for them, and are more obvious in the 7T image.                                  
                                    </p>
                                </div>
                                <div class="col-12 col-lg-3"></div>
                            </div>

                            <!-- Media -->
                            <div class="row center">
                                <h2>3T</h2>
                                <div class="col-12 center">
                                    <img id="3T_bias_Img" src="images/bias_field/3T_raw.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/bias_field/3T_raw.png','images/bias_field/3T_N4.png','3T_bias_Img')"/>

                                     <br><br>

                                     <!-- Pop Up -->
                                    <div class="popup" onclick="myFunction('3T_bias_pop')" >
                                        <a id="view-hide-bias-code-3T" onClick="javascript:viewHideCollapse('View Code','Hide Code','view-hide-bias-code-3T')">View Code</a>
                                        <span class="popuptext" id="3T_bias_pop">
                                                N4ITKBiasFieldCorrection --bffwhm 0.15 <br>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--splinedistance 50 --outputbiasfield <br>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T_biasField.nii <br>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T.nii <br>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T_N4.nii
                                        </span>
                                    </div>

                                    <!-- Model Box -->
                                    <!-- Trigger/Open The Modal -->
                                    <button class="modal-button" href="#Modal-3T-bias">View Code</button>
                                    
                                    <!-- The Modal -->
                                    <div id="Modal-3T-bias" class="modal">

                                        <!-- Modal Content -->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <span class="close">x</span>
                                            </div>
                                            <div class="modal-body">
                                                <p>
                                                    N4ITKBiasFieldCorrection --bffwhm 0.15 <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--splinedistance 50 --outputbiasfield <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T_biasField.nii <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T.nii <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accelerated_Sagittal_MPRAGE_3T_N4.nii
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 7T -->
                        <div id="7T_bias" class="tab-pane fade">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Bias Field Correction</h2>
                                    <p>
                                       As the strength of the magnetic field increases so does magnetic susceptibility artifacting. This is much more obvious here in the 7T image below. 
                                       Artifacting like this can cause problems in cortical segmentation and tissue classificaiton algorithms, which is why we want to correct for it. 
                                       An example of the bias field using a color gradiant is provided below as well. Red signifies areas that suffered greater signal deterioration, 
                                       from inhomogenieties in the magnetic field. Again I use <code>N4ITKBiasFieldCorrection</code> to correct the biasing, and the code can be viewed 
                                       below. You can also <b><em>click</em></b> on the image to switch between the corrected and uncorrected images, to see the result of the correction. 
                                    </p>
                                </div>
                                <div class="col-12 col-lg-3"></div>
                            </div>
                            <!-- Media -->
                            <div class="row center">
                                <h2>7T</h2>
                                <div class="col-12 center">
                                    <img id="7T_bias_Img" src="images/bias_field/7T_raw.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/bias_field/7T_raw.png','images/bias_field/7T_N4.png','7T_bias_Img')"/>

                                    <br><br>
                                    <!-- Pop Up-->
                                    <div class="popup" onclick="myFunction('7T_bias_pop')" >
                                        <a id="view-hide-bias-code-7T" onClick="javascript:viewHideCollapse('View Code','Hide Code','view-hide-bias-code-7T')">View Code</a>
                                        <span class="popuptext" id="7T_bias_pop">
                                            N4ITKBiasFieldCorrection <br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--bffwhm 0.15 
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--splinedistance 50 <br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--outputbiasfield <br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag_7T_biasField.nii <br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag_7T.nii <br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag7T_N4.nii
                                        </span>
                                      </div>
                                    
                                    <!-- Model Box -->
                                    <!-- Trigger/Open The Modal -->
                                    <button class="modal-button" href="#Modal-7T-bias">View Code</button>
                                    
                                    <!-- The Modal -->
                                    <div id="Modal-7T-bias" class="modal">

                                        <!-- Modal Content -->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <span class="close">x</span>
                                            </div>
                                            <div class="modal-body">
                                                <p>
                                                    N4ITKBiasFieldCorrection --bffwhm 0.15 <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--splinedistance 50 --outputbiasfield <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag_7T_biasField.nii <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag_7T.nii <br>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1_mprage_sag7T_N4.nii
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                      

                                    <br>
                                    <!-- Collapsable -->
                                    <a data-toggle="collapse" id="view-hide-bias" data-target="#7T_bias_field" onClick="javascript:viewHideCollapse('View Bias Field', 'Hide Bias Field', 'view-hide-bias')">View Bias Field</a>

                                    <!-- Collapsable Contents-->
                                    <div class="collapse" id="7T_bias_field">
                                        <img height="450" width="900" style="border: 9px outset rgb(107, 110, 119);" src="images/bias_field/7T_biasField.png"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>    
                </div>
                <!-- Brain Extraction -->
                <div id="bet" class="tab-pane fade">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_bet">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_bet">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>

                    <div class="tab-content">
                        <!-- 3T -->
                        <div id="3T_bet" class="tab-pane fade in active">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Brain Extraction</h2>
                                    <p>
                                       Because the brain is our primary interest here, we must isolate it from the non-important areas. Portions of the image, 
                                       such as neck, eyes, nose, and skull are of no interest to us, and so we must remove them from the image. We do this because, similarly to Bias 
                                       Field Correction, it will allow image processing algorithms to perform much smoother and quicker if these areas are not present in the image. 
                                       Therefore we perform what is called "Brain Extraction". There are many tools available to do so, but here I use FMRIB's Software Lirbrary 
                                       (<a href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/" target="_blank" rel="noopener">FSL</a>) Brain Extraction Toolkit 
                                       (<a href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BET/UserGuide" target="_blank" rel="noopener">BET</a>). 
                                       Click on the image to see the image after running BET on the data. You can also view an overlay by clicking the overlay collapsable. 
                                    </p>
                                </div>
                                <div class="col-12 col-lg-3"></div>
                            </div>
                            <!-- Media -->
                            <div class="row center">
                                <h2>3T</h2>
                                <div class="col-12 center">
                                    <img id="3T_bet_Img" src="images/bet/3T.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/bet/3T.png','images/bet/3T_BET.png','3T_bet_Img')"/>

                                    <br><br>
                                
                                    <a data-toggle="collapse" id="view-hide-3T-bet-overlay" data-target="#3T_bet_overlay" onClick="javascript:viewHideCollapse('View Overlay', 'Hide Overlay', 'view-hide-3T-bet-overlay')">View Overlay</a>
                                    <div class="collapse" id="3T_bet_overlay">
                                        <img height="450" width="900" style="border: 9px outset rgb(107, 110, 119);" src="images/bet/3T_BET_overlay.png"/>
                                    </div>
                                </div>
                            </div>
                        </div>
   
                        <!-- 7T -->
                        <div id="7T_bet" class="tab-pane fade">
                            <!-- Description -->
                            <div class="row">
                                <div class="col-12 col-lg-10 center" style="border-bottom: 2px solid rgb(76, 78, 82)">
                                    <h2>Brain Extraction</h2>
                                    <p>
                                       Brain Extraction was also run on the 7T image all the same using FSL's BET. Just as in the 3T image, BET does an excellent job of removing
                                       non-brain areas, and isolating brain tissue. You'll notice that the "-f" option uses a value of "0.3" instead of "0.4". The "-f" option adjusts 
                                       the fractional intensity threshold, which basically controlls the outline the algorithm uses to isolate the brain. Larger values are more restrictive and will result
                                       in more areas being removed, whereas smaller values are more lenient and will result in less areas being removed. I chose the values here simply by trial 
                                       and error and stuck with which option gave the best resultant image. You can also click on the image here to see the results of BET on the 7T image, as well
                                       as view the overlay by clicking the overlay collapsable. 
                                    </p>
                                </div>
                                <div class="col-12 col-lg-3"></div>
                            </div>
                            <!-- Media -->
                            <div class="row center">
                                <h2>7T</h2>
                                <div class="col-12 center">
                                    <img id="7T_bet_Img" src="images/bet/7T.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                    onclick="javascript:changeImg('images/bet/7T.png','images/bet/7T_BET.png','7T_bet_Img')"/>

                                    <br><br>
                                
                                    <a data-toggle="collapse" id="view-hide-7T-bet-overlay" data-target="#7T_bet_overlay" onClick="javascript:viewHideCollapse('View Overlay', 'Hide Overlay', 'view-hide-7T-bet-overlay')">View Overlay</a>
                                    <div class="collapse" id="7T_bet_overlay">
                                        <img height="450" width="900" style="border: 9px outset rgb(107, 110, 119);" src="images/bet/7T_BET_overlay.png"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Registration -->
                <div id="registration" class="tab-pane fade">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_reg">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_reg">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>

                    <div class="tab-content">
                        <!-- 3T -->
                        <div id="3T_reg" class="tab-pane fade in active">
                            <!-- Description -->
                            <!-- Media -->
                            <!-- Slideshow container -->
                            <br>
                            <div class="slideshow-container">
                                <!-- Full-width images with number and caption text-->
                                <div class="mySlides1 fade in active">
                                    <img id="3T_reg_Img1" src="images/reg/3T_MNI_1mm.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/3T_MNI_1mm.png','images/reg/3T_MNI_noReg.png','3T_reg_Img1')"/>
                                </div>

                                <div class="mySlides1 fade in">
                                    <img id="3T_reg_Img2" src="images/reg/3T_MNI_noReg.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/3T_MNI_noReg.png','images/reg/3T_MNI_6DOF.png','3T_reg_Img2')"/>
                                </div>

                                <div class="mySlides1 fade in">
                                    <img id="3T_reg_Img3" src="images/reg/3T_MNI_6DOF.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/3T_MNI_6DOF.png','images/reg/3T_MNI_12DOF.png','3T_reg_Img3')"/>
                                </div>

                                <!-- Next and previous buttons -->
                                <a class="prev" onclick="plusSlides(-1,0)">&#10094</a>
                                <a class="next" onclick="plusSlides(1,0)">&#10095</a>
                            </div>
                        </div>
   
                        <!-- 7T -->
                        <div id="7T_reg" class="tab-pane fade in">
                            <!-- Description -->
                            <!-- Media -->
                            <!-- Slideshow container -->
                            <br>
                            <div class="slideshow-container">
                                <!-- Full-width images with number and caption text-->
                                <div class="mySlides2 fade in active">
                                    <img id="7T_reg_Img1" src="images/reg/7T_MNI_1mm.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/7T_MNI_1mm.png','images/reg/7T_MNI_noReg.png','7T_reg_Img1')"/>
                                </div>

                                <div class="mySlides2 fade in">
                                    <img id="7T_reg_Img2" src="images/reg/7T_MNI_noReg.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/7T_MNI_noReg.png','images/reg/7T_MNI_6DOF.png','7T_reg_Img2')"/>
                                </div>

                                <div class="mySlides2 fade in">
                                    <img id="7T_reg_Img3" src="images/reg/7T_MNI_6DOF.png" height="450" width="900" style="border: 9px outset rgb(107, 110, 119);"  
                                     onclick="javascript:changeImg('images/reg/7T_MNI_6DOF.png','images/reg/7T_MNI_12DOF.png','7T_reg_Img3')"/>
                                </div>

                                <!-- Next and previous buttons -->
                                <a class="prev" onclick="plusSlides(-1,1)">&#10094</a>
                                <a class="next" onclick="plusSlides(1,1)">&#10095</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Tissue Classification -->
                <div id="tissue-class" class="tab-pane fade">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_tissue-class">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_tissue-class">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>

                    <div class="tab-content">
                        <!-- 3T -->
                        <div id="3T_tissue-class" class="tab-pane fade">
                            <!-- Description -->
                            <!-- Media -->
                        </div>
   
                        <!-- 7T -->
                        <div id="7T_tissue-class" class="tab-pane fade">
                           <!-- Description -->
                           <!-- Media -->
                        </div>
                    </div>
                </div>
                <!-- Sub-Cortical Segmentation-->
                <div id="sub-seg" class="tab-pane fade">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4 center">
                            <div class="btn-group btn-group-lg">
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#3T_sub-seg">&nbsp;&nbsp;&nbsp;&nbsp;3T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#7T_sub-seg">&nbsp;&nbsp;&nbsp;&nbsp;7T&nbsp;&nbsp;&nbsp;&nbsp;</a>
                            </div>
                        </div>
                        <div class="col-lg-4"></div>
                    </div>

                    <div class="tab-content">
                        <!-- 3T -->
                        <div id="3T_sub-seg" class="tab-pane fade">
                            <!-- Description -->
                            <!-- Media -->
                        </div>
   
                        <!-- 7T -->
                        <div id="7T_sub-seg" class="tab-pane fade">
                           <!-- Description -->
                           <!-- Media -->
                        </div>
                    </div>
                </div>  
            </div>
        </div>
    </div>
</section>
<!-- endregion Structural-->


<!-- Functional -->
<section class="center" id="functional-section">
    <div class="container">
        <!-- Description -->
        <div class="row">
            <!-- Media -->
            <div class="col-12 col-lg-5 center">
                <img height="300" width="400" style="border: 9px outset rgb(107, 110, 119);" src="images/fMRI_DMN_lightbox.png" alt="default mode network">
            </div>

            <!-- Description -->
            <div class="col-12 col-lg-7 center">
                <h1>Functional Imaging</h1>
                <br>

                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus facilisis, eros in lacinia tempor, dolor neque tristique est,
                    ac condimentum lectus mi ut odio. Nulla facilisi. Ut volutpat convallis dui, sed mollis felis sollicitudin eget. Praesent felis eros, 
                    pulvinar sit amet nulla eu, venenatis suscipit sem. Aenean a magna quis erat lobortis lobortis quis id lectus. Integer sit amet dapibus lorem. 
                    Integer a elit eu nibh tempor dapibus. Phasellus interdum eros odio, sit amet congue lacus blandit in.
                </p>
            </div>
        </div>
        <br>
        <a data-toggle="collapse" id="view-hide-func" data-target="#functional-content" onClick="javascript:viewHideCollapse('View', 'Hide', 'view-hide-func')">View</a>

        <!-- Content -->
        <div class="row collapse" id="functional-content">
            <!-- Button Tool Bar-->
            <div class="btn-group btn-group-lg">
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab1">Tab 1</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab2">Tab 2</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab3">Tab 3 </a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab4">Tab 4</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab5">Tab 5</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab6">Tab 6</a>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Tab 1 -->

                <!-- Tab 2 -->
                
                <!-- Tab 3 -->
                
                <!-- Tab 4 -->
                
                <!-- Tab 5 -->
                
                <!-- Tab 6 -->
            </div>
        </div>
    </div>
</section>
<!-- endregion Functional -->


<!-- Diffusion -->
<section class="center" id="diffusion-section">
    <div class="container">
        <!-- Description -->
        <div class="row">
            <!-- Description -->
            <div class="col-12 col-lg-7 center">
                <h1>Diffusion Imaging</h1>
                <br>

                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus facilisis, eros in lacinia tempor, dolor neque tristique est,
                    ac condimentum lectus mi ut odio. Nulla facilisi. Ut volutpat convallis dui, sed mollis felis sollicitudin eget. Praesent felis eros, 
                    pulvinar sit amet nulla eu, venenatis suscipit sem. Aenean a magna quis erat lobortis lobortis quis id lectus. Integer sit amet dapibus lorem. 
                    Integer a elit eu nibh tempor dapibus. Phasellus interdum eros odio, sit amet congue lacus blandit in.
                </p>
            </div>

            <!-- Media -->
            <div class="col-12 col-lg-5 center">
                <video height="325" width="400" style="border: 9px outset rgb(107, 110, 119);" autoplay loop muted>
                    <source src="videos/gqi.odf.whole.brain.fiber.track.rotation.movie.mp4" type="video/mp4">
                </video> 
            </div>
        </div>
        <br>
        <a data-toggle="collapse" id="view-hide-diff" data-target="#diffusion-content" onClick="javascript:viewHideCollapse('View', 'Hide', 'view-hide-diff')">View</a>

        <!-- Content -->
        <div class="row collapse" id="diffusion-content">
            <!-- Button Tool Bar-->
            <div class="btn-group btn-group-lg">
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab1">Tab 1</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab2">Tab 2</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab3">Tab 3 </a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab4">Tab 4</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab5">Tab 5</a>
                <a class="btn btn-primary btn-lg" data-toggle="pill" href="#tab6">Tab 6</a>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Tab 1 -->

                <!-- Tab 2 -->
                
                <!-- Tab 3 -->
                
                <!-- Tab 4 -->
                
                <!-- Tab 5 -->
                
                <!-- Tab 6 -->
            </div>
        </div>
    </div>
</section>
<!-- endregion Diffusion -->



<!-- #region Contact Info-->
<section class="center" id="contact">
    <footer class="container">
        <div class="row">
            <div class="col-12 col-lg-5">
                <h1>Contact<br><br></h1>
            </div>
            
            <div class="col-12 col-lg-7">
                <ul class="fa-ul">
                    <li style="font-family: Arial, Helvetica, sans-serif;font-weight: bold;">
                        <i class="fa-li fas fa-envelope contact-icon" aria-hidden="true"></i>
                        <a href="mailto:stephengonz151@gmail.com">stephengonz151@gmail.com</a>
                    </li>
                    <li>
                        <i class="fa-li fas fa-map-marker contact-icon" aria-hidden="true"></i>
                        1200 E. California Blvd., Pasadena, CA 91125
                    </li>
                    <li>
                        <i class="fa-li fa fa-phone contact-icon" aria-hidden='true'></i>
                        Office: 626-395-8111
                    </li>
                    <li>
                        <i class="fa-li fas fa-inbox contact-icon" aria-hidden="true"></i>
                        MC 228-77
                    </li>
                </ul>
            </div>
        </div>
    </footer>
</section>

<!-- endregion -->

<!-- Smooth Scroll -->
<script>
    $(document).ready(function(){
      // Add smooth scrolling to all links in navbar + footer link
      $(".navbar a, footer a[href='#myPage']").on('click', function(event) {
    
      // Make sure this.hash has a value before overriding default behavior
      if (this.hash !== "") {
    
        // Prevent default anchor click behavior
        event.preventDefault();
    
        // Store hash
        var hash = this.hash;
    
        // Using jQuery's animate() method to add smooth page scroll
        // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
        $('html, body').animate({
          scrollTop: $(hash).offset().top
        }, 900, function(){
    
          // Add hash (#) to URL when done scrolling (default click behavior)
          window.location.hash = hash;
          });
        } // End if
      });
    })
</script>

<!-- Change Image on Click -->
<script>
    function changeImg(img1,img2,imgId){
        var image = document.getElementById(imgId);
        if (image.src.match(img1)){
            image.src = img2;
        } else {
            image.src = img1
        }
    }
</script>

<!-- View Hide Collapable -->
<script>
    function viewHideCollapse(text1,text2,vhcID){
        var element = document.getElementById(vhcID);
        if (element.innerHTML === text1) element.innerHTML = text2;
        else {
            element.innerHTML = text1;
        }
    }
</script>


<!-- Slide Show -->
<script>
    var slideIndex = [1,1];
    var slideId = ["mySlides1", "mySlides2"]
    showSlides(1, 0);
    showSlides(1, 1);
    
    function plusSlides(n, no) {
      showSlides(slideIndex[no] += n, no);
    }
    
    function showSlides(n, no) {
      var i;
      var x = document.getElementsByClassName(slideId[no]);
      if (n > x.length) {slideIndex[no] = 1}    
      if (n < 1) {slideIndex[no] = x.length}
      for (i = 0; i < x.length; i++) {
         x[i].style.display = "none";  
      }
      x[slideIndex[no]-1].style.display = "block";  
    }
</script>

<!-- Pop Up -->
<script>
    // When the user clicks on div, open the popup
    function myFunction(popID) {
      var popup = document.getElementById(popID);
      popup.classList.toggle("show");
    }
</script>

<!-- Box Modal -->
<script>
    // Get the button that opens the modal
    var btn = document.querySelectorAll("button.modal-button");

    // All page modals
    var modals = document.querySelectorAll('.modal');

    // Get the <span> element that closes the modal
    var spans = document.getElementsByClassName("close");

    // When the user clicks the button, open the modal
    for (var i = 0; i < btn.length; i++) {
    btn[i].onclick = function(e) {
        e.preventDefault();
        modal = document.querySelector(e.target.getAttribute("href"));
        modal.style.display = "block";
    }
    }

    // When the user clicks on <span> (x), close the modal
    for (var i = 0; i < spans.length; i++) {
    spans[i].onclick = function() {
        for (var index in modals) {
        if (typeof modals[index].style !== 'undefined') modals[index].style.display = "none";    
        }
    }
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
        for (var index in modals) {
        if (typeof modals[index].style !== 'undefined') modals[index].style.display = "none";    
        }
        }
    }
</script>
</body>
</html>

